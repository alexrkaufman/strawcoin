{% extends "base.jinja2" %}
{% block content %}
    <div class="content-section content-section--center">
        <h1 class="page-title">ðŸŽ­ STRAW COIN LEADERBOARD</h1>
        <p class="subtitle">Live Market Data â€¢ Performance Requests â€¢ Wealth Rankings</p>
    </div>
    <!-- Market Status Bar -->
    <div class="market-status-bar">
        <div class="market-status-grid">
            <div class="market-status-item status{% if market_status and market_status.status_color == '#ff6b6b' %} error{% elif market_status and market_status.status_color == '#FFA726' %} warning{% endif %}">
                <span class="market-label">MARKET STATUS:</span>
                <span class="market-value">{{ market_status.status_text if market_status else 'ðŸŸ¢ OPEN' }}</span>
            </div>
            <div class="market-status-item">
                <span class="market-label">TOTAL MARKET CAP:</span>
                <span id="marketCap" class="market-value">Loading...</span>
            </div>
            <div class="market-status-item volume">
                <span class="market-label">24H VOLUME:</span>
                <span id="volume24h" class="market-value">Loading...</span>
            </div>
            <div class="market-status-item traders">
                <span class="market-label">ACTIVE TRADERS:</span>
                <span id="activeTraders" class="market-value">17</span>
            </div>
        </div>
    </div>
    <!-- TV Display Grid -->
    <div class="tv-display-grid">
        <!-- Left Column: Recent Offers -->
        <div class="tv-column">
            <div class="content-section content-section--dark">
                <div class="tv-section-header">
                    <h2 class="tv-section-title">ðŸŽ­ Recent Approved Offers</h2>
                </div>
                <div id="recentOffers" class="tv-offers-list">
                    <div class="text-center opacity-70">Loading offers...</div>
                </div>
            </div>
        </div>
        <!-- Right Column: Rich and Poor Lists -->
        <div class="tv-column">
            <!-- Richest Users -->
            <div class="content-section content-section--dark">
                <div class="tv-section-header">
                    <h2 class="tv-section-title">ðŸ’° The 1%</h2>
                </div>
                <div id="richestUsers" class="tv-ranking-list">
                    <div class="text-center opacity-70">Loading...</div>
                </div>
            </div>
            <!-- Poorest Users -->
            <div class="content-section content-section--dark">
                <div class="tv-section-header">
                    <h2 class="tv-section-title">ðŸ¥º Bottom Quintile</h2>
                </div>
                <div id="poorestUsers" class="tv-ranking-list">
                    <div class="text-center opacity-70">Loading...</div>
                </div>
            </div>
        </div>
    </div>
    <!-- Auto-refresh indicator -->
    <div class="tv-refresh-indicator">
        <div class="live-indicator">
            <div class="live-dot"></div>
            <span class="live-text">LIVE</span>
        </div>
        <span id="updateTime" class="update-time">Auto-refresh every 10s</span>
    </div>
    <script>
    // Pass current username to JavaScript
    window.currentUsername = '{{ current_username }}';
    </script>
    <script src="{{ url_for('static', filename='js/leaderboard.js') }}"></script>
{% endblock %}
